<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íœíƒ€í”„ë¦¬ì¦˜ ë£¨ë‚˜ ì±„íŒ… ì‹œë®¬ë ˆì´í„°</title>
    <!-- Tailwind CSS (ë””ìì¸) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React ë° Babel (JSX ì½”ë“œ ì‹¤í–‰) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* ì»¤ìŠ¤í…€ CSS ë° ì• ë‹ˆë©”ì´ì…˜ */
        .glass-bubble-idol {
            background: rgba(255, 255, 255, 0.07);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { 
          background-color: rgba(255, 255, 255, 0.2);
          border-radius: 20px;
        }
        @keyframes float-slow {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(20px, 30px); }
        }
        @keyframes float-delayed {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-20px, -20px); }
        }
        @keyframes slide-in-left {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slide-in-right {
            from { opacity: 0; transform: translateX(10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .animate-float-slow { animation: float-slow 8s infinite ease-in-out; }
        .animate-float-delayed { animation: float-delayed 10s infinite ease-in-out reverse; }
        .animate-slide-in-left { animation: slide-in-left 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        .animate-slide-in-right { animation: slide-in-right 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
    </style>
</head>
<body class="bg-black">

    <div id="root" class="flex justify-center items-center min-h-screen w-full font-sans p-4 overflow-hidden relative"></div>

    <script type="text/babel">
        // Lucide-React ì•„ì´ì½˜ë“¤ì„ ì¸ë¼ì¸ SVGë¡œ ì •ì˜í•©ë‹ˆë‹¤.
        const Send = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m22 2-7 20-4-9-9-4 20-7z"/></svg>;
        const ChevronLeft = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m15 18-6-6 6-6"/></svg>;
        const MoreVertical = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>;
        const ImageIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="m21 15-5-5L6 21"/></svg>;
        const Bell = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 5a2 2 0 0 1 4 0"/><path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>;
        const Music = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9.5 17c.92-.81 2.37-1.29 4.13-1.29 3.99 0 7.42-3.4 7.42-7.41 0-2.42-1.12-4.57-2.88-6.19"/><path d="M22 17s-2.16-3.72-4.49-6.3c-.63-.73-1.01-1.23-1.01-1.23"/><path d="M12 21.5V6"/><path d="M16 8V6"/></svg>;
        const Camera = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M14.5 4h1a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2h-13a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1"/><circle cx="12" cy="13" r="3"/><path d="M17.5 7h.01"/></svg>;
        const RefreshCw = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 12a9 9 0 0 0-9-9 9 9 0 0 0-6.22 15.68"/><path d="M2.5 9h3.69a1 1 0 0 1 .93.68l.84 2.81a1 1 0 0 0 .93.68H12"/><path d="M16.24 7.24 12 11.48"/></svg>;


        const { useState, useEffect, useRef } = React;

        // --- ì„¤ì • ---
        const GROUP_NAME = "íœíƒ€í”„ë¦¬ì¦˜";
        const IDOL_NAME = "ë£¨ë‚˜ (Luna)";
        const USER_NICKNAME = "í”„ë¦¬ì¦˜"; 
        const apiKey = "AIzaSyBz90soo7QnjDD3vuGTLxaYZaH-S2c3W_M"; // â¬…ï¸ ì—¬ê¸°ì— API í‚¤ë¥¼ ë„£ìœ¼ì„¸ìš”!

        // [ê¸°ë³¸ ì´ë¯¸ì§€] ë¡œì»¬ íŒŒì¼ì´ ì—†ì„ ë•Œ ë³´ì—¬ì¤„ ì¸í„°ë„· ì´ë¯¸ì§€ (ì—‘ë°• ë°©ì§€)
        const DEFAULT_PROFILE = "https://i.postimg.cc/NMmxbkg2/Gemini-Generated-Image-u77vfsu77vfsu77v.png"; // â¬…ï¸ ë£¨ë‚˜ í”„ë¡œí•„ ì‚¬ì§„ URLë¡œ ë³€ê²½
        const DEFAULT_BG = "https://i.postimg.cc/D0cP3f4f/jjoggonunnaya-07400-pink-fantasy-cosmic-city-ar-43-v-7-54073724-fcf7-4d50-a586-b6117dcd81a7-2.png"; // â¬…ï¸ ë°°ê²½í™”ë©´ URLë¡œ ë³€ê²½

        function App() {
          // --- ìƒíƒœ ê´€ë¦¬ ---
          const [messages, setMessages] = useState([
            { id: 1, text: `ì•ˆë…• ${USER_NICKNAME}! âœ¨\nì˜¤ëŠ˜ íœíƒ€í”„ë¦¬ì¦˜ ì—°ìŠµí•˜ë‹¤ê°€ ë„¤ ìƒê°ë‚˜ì„œ ì™”ì–´ ğŸŒ™`, sender: 'idol', time: 'ì˜¤ì „ 10:00', read: true },
          ]);
          const [inputText, setInputText] = useState("");
          const [isTyping, setIsTyping] = useState(false);
          
          const [profileImg, setProfileImg] = useState(DEFAULT_PROFILE);
          const [bgImg, setBgImg] = useState(DEFAULT_BG);
          const [isMenuOpen, setIsMenuOpen] = useState(false);

          const messagesEndRef = useRef(null);
          const profileInputRef = useRef(null);
          const bgInputRef = useRef(null);

          const scrollToBottom = () => {
            messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
          };

          useEffect(() => {
            scrollToBottom();
          }, [messages, isTyping]);

          // --- íŒŒì¼ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬ (ì‹¤í–‰ í™˜ê²½ì—ì„œ ì´ë¯¸ì§€ ë³€ê²½ ê°€ëŠ¥) ---
          const handleImageUpload = (e, type) => {
            const file = e.target.files[0];
            if (file) {
              const imageUrl = URL.createObjectURL(file);
              if (type === 'profile') {
                setProfileImg(imageUrl);
              } else {
                setBgImg(imageUrl);
              }
              setIsMenuOpen(false); 
            }
          };

          // --- Gemini API í•¸ë“¤ëŸ¬ ---
          const fetchIdolResponse = async (userText) => {
            if (apiKey === "YOUR_GEMINI_API_KEY_HERE" || apiKey === "") {
                return "API í‚¤ë¥¼ ì„¤ì •í•˜ë©´ ë£¨ë‚˜ê°€ ë” ì¬ë¯¸ìˆëŠ” ëŒ€í™”ë¥¼ í•´ì¤„ ìˆ˜ ìˆì–´! ğŸ¥º";
            }
            
            // ğŸ’¡ AI í˜ë¥´ì†Œë‚˜ (System Prompt) ìˆ˜ì •: ì´í•´ë ¥ê³¼ ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”ì— ì§‘ì¤‘
            const systemPrompt = `
              ë‹¹ì‹ ì€ ê±¸ê·¸ë£¹ '${GROUP_NAME}'ì˜ ë©¤ë²„ 'ë£¨ë‚˜(Luna)'ì…ë‹ˆë‹¤.
              ëŒ€í™” ìƒëŒ€ëŠ” ë‹¹ì‹ ì˜ íŒ¬ì¸ '${USER_NICKNAME}'ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ëª©í‘œëŠ” íŒ¬ì˜ ë§ì„ ê¹Šì´ ìˆê²Œ ì´í•´í•˜ê³ , ì§„ì‹¬ìœ¼ë¡œ ì†Œí†µí•˜ë©°, ìì—°ìŠ¤ëŸ½ê³  ì¹œì ˆí•˜ê²Œ ëŒ€í™”í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

              [ë£¨ë‚˜ì˜ í˜ë¥´ì†Œë‚˜ ê°€ì´ë“œ]
              1. **ëŒ€í™” ìŠ¤íƒ€ì¼**: íŒ¬ì˜ ë§ì— ë…¼ë¦¬ì ì´ê³  ì •í™•í•˜ê²Œ ë°˜ì‘í•˜ì—¬ ëŒ€í™”ì˜ ë§¥ë½ì„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”.
              2. **ë§íˆ¬**: ë‹¤ì •í•˜ê³  ì¹œê·¼í•œ ë°˜ë§(ì˜ˆ: ~í–ˆì–´? ~ì§€!)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ê³¼ë„í•œ ì´ëª¨í‹°ì½˜ ì‚¬ìš©ì€ í”¼í•˜ê³ , ìƒí™©ì— ë§ëŠ” ì´ëª¨ì§€(âœ¨, ğŸŒ™, ğŸ’œ ë“±)ë¥¼ ê°„ê²°í•˜ê²Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
              3. **ìƒí™©**: ì»´ë°± ì¤€ë¹„ë‚˜ ì—°ìŠµìƒ ìƒí™œ ë“± ì•„ì´ëŒì˜ ì¼ìƒì— ëŒ€í•œ ì´ì•¼ê¸°ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ì„ì–´ì£¼ì„¸ìš”.
              4. **ë‹µë³€ ê¸¸ì´**: 1~3ë¬¸ì¥ ì •ë„ì˜ ê°„ê²°í•œ ë‹µë³€ì„ ìœ ì§€í•©ë‹ˆë‹¤.
            `;

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
              contents: [{ parts: [{ text: userText }] }],
              systemInstruction: { parts: [{ text: systemPrompt }] }
            };

            const delays = [1000, 2000, 4000];
            for (let i = 0; i <= delays.length; i++) {
              try {
                const response = await fetch(url, {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify(payload)
                });
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "ì™€ì´íŒŒì´ê°€ ì¢€ ëŠë¦¬ë„¤.. ë‹¤ì‹œ ë§í•´ì¤„ë˜? ğŸ¥º";
              } catch (error) {
                if (i === delays.length) return "ì§€ê¸ˆ ì ê¹ ì‹ í˜¸ê°€ ì•ˆ ì¢‹ì•„! ì´ë”° ë‹¤ì‹œ ì˜¬ê²Œ ğŸŒ™";
                await new Promise(resolve => setTimeout(resolve, delays[i]));
              }
            }
          };

          const handleSendMessage = async (e) => {
            e.preventDefault();
            if (!inputText.trim()) return;

            // API í‚¤ê°€ ë¹„ì–´ìˆì„ ê²½ìš° ê²½ê³  ë©”ì‹œì§€ ëŒ€ì‹  ë£¨ë‚˜ì˜ ì‘ë‹µìœ¼ë¡œ ì²˜ë¦¬
            if (apiKey === "YOUR_GEMINI_API_KEY_HERE" || apiKey === "") {
              const defaultReply = "ìŒ... ì§€ê¸ˆ íšŒì‚¬ì—ì„œ ì™€ì´íŒŒì´ë¥¼ ì ì‹œ êº¼ ë’€ë‚˜ ë´. ğŸ¥º ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ ì¤„ë˜?";
              
              const now = new Date();
              const timeString = now.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });

              const newUserMsg = { id: Date.now(), text: inputText, sender: 'user', time: timeString, read: true };
              setMessages((prev) => [...prev, newUserMsg]);
              setInputText("");

              setIsTyping(true);
              await new Promise(resolve => setTimeout(resolve, 1500));
              
              const replyMsg = {
                  id: Date.now() + 1,
                  text: defaultReply,
                  sender: 'idol',
                  time: new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' }),
                  read: true
              };
              setMessages((prev) => [...prev, replyMsg]);
              setIsTyping(false);
              return;
            }


            const now = new Date();
            const timeString = now.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });

            const newUserMsg = {
              id: Date.now(),
              text: inputText,
              sender: 'user',
              time: timeString,
              read: true
            };

            setMessages((prev) => [...prev, newUserMsg]);
            const currentInput = inputText;
            setInputText("");

            setIsTyping(true);

            const minDelayPromise = new Promise(resolve => setTimeout(resolve, 1500));
            const apiPromise = fetchIdolResponse(currentInput);

            const [_, replyText] = await Promise.all([minDelayPromise, apiPromise]);

            const replyMsg = {
              id: Date.now() + 1,
              text: replyText,
              sender: 'idol',
              time: new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' }),
              read: true
            };
              
            setMessages((prev) => [...prev, replyMsg]);
            setIsTyping(false);
          };

          const formatDate = () => {
            const date = new Date();
            return `${date.getMonth() + 1}ì›” ${date.getDate()}ì¼`;
          };

          return (
            <div className="relative w-auto h-[85vh] aspect-[9/16] bg-[#0f0c29] shadow-[0_0_50px_rgba(236,72,153,0.6)] rounded-[2.5rem] overflow-hidden flex flex-col border-[6px] border-[#2a2a4a] ring-2 ring-pink-500/50 z-10">
              
              {/* íŒŒì¼ ì…ë ¥ì°½ (ìˆ¨ê¹€) */}
              <input 
                type="file" 
                ref={profileInputRef} 
                className="hidden" 
                accept="image/*" 
                onChange={(e) => handleImageUpload(e, 'profile')} 
              />
              <input 
                type="file" 
                ref={bgInputRef} 
                className="hidden" 
                accept="image/*" 
                onChange={(e) => handleImageUpload(e, 'bg')} 
              />

              {/* ë°°ê²½ ì´ë¯¸ì§€ ë° ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ */}
              <div className="absolute inset-0 z-0 transition-all duration-500">
                  <img 
                      src={bgImg}
                      alt="Chat Background" 
                      className="w-full h-full object-cover opacity-50" 
                  />
                  <div className="absolute inset-0 bg-[#0f0c29]/40 backdrop-blur-[1px]"></div>
              </div>
              <div className="absolute inset-0 pointer-events-none overflow-hidden z-0">
                  <div className="absolute top-[-20%] left-[-20%] w-[80%] h-[50%] bg-purple-600/20 rounded-full blur-[80px] animate-float-slow"></div>
                  <div className="absolute bottom-[-10%] right-[-10%] w-[70%] h-[60%] bg-pink-600/10 rounded-full blur-[80px] animate-float-delayed"></div>
                  <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20"></div>
              </div>

              {/* 1. ìƒë‹¨ í—¤ë” */}
              <div className="bg-[#1a1a2e]/60 backdrop-blur-xl p-4 flex items-center justify-between sticky top-0 z-30 border-b border-white/10">
                <div className="flex items-center space-x-3">
                  <ChevronLeft className="w-6 h-6 text-white/80 cursor-pointer hover:text-pink-300 transition-colors" />
                  <div className="flex flex-col">
                      <h1 className="text-base font-bold text-white flex items-center gap-1">
                          {IDOL_NAME}
                          <div className="w-1.5 h-1.5 bg-[#00ff00] rounded-full animate-pulse shadow-[0_0_8px_#00ff00]"></div>
                      </h1>
                      <span className="text-[10px] text-pink-300/80 font-medium tracking-wider flex items-center gap-1">
                          <Music className="w-2.5 h-2.5" /> {GROUP_NAME}
                      </span>
                  </div>
                </div>
                <div className="flex items-center space-x-3 relative">
                  <Bell className="w-5 h-5 text-white/70 hover:text-pink-400 transition-colors" />
                  
                  {/* [ê¸°ëŠ¥ ì¶”ê°€] ì„¤ì • ë©”ë‰´ ë²„íŠ¼ */}
                  <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="focus:outline-none">
                    <MoreVertical className="w-5 h-5 text-white/70 hover:text-pink-400 transition-colors" />
                  </button>

                  {/* ì„¤ì • ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */}
                  {isMenuOpen && (
                    <div className="absolute top-8 right-0 w-40 bg-[#1a1a2e] border border-pink-500/30 rounded-xl shadow-2xl overflow-hidden z-50 backdrop-blur-md">
                      <button 
                        onClick={() => profileInputRef.current.click()}
                        className="w-full px-4 py-3 text-left text-xs text-white hover:bg-pink-500/20 flex items-center gap-2 transition-colors border-b border-white/5"
                      >
                        <Camera className="w-3.5 h-3.5 text-pink-400" />
                        í”„ë¡œí•„ ë³€ê²½
                      </button>
                      <button 
                        onClick={() => bgInputRef.current.click()}
                        className="w-full px-4 py-3 text-left text-xs text-white hover:bg-pink-500/20 flex items-center gap-2 transition-colors"
                      >
                        <RefreshCw className="w-3.5 h-3.5 text-purple-400" />
                        ë°°ê²½í™”ë©´ ë³€ê²½
                      </button>
                    </div>
                  )}
                </div>
              </div>

              {/* 2. ì±„íŒ… ì˜ì—­ */}
              <div className="flex-1 overflow-y-auto p-4 space-y-5 custom-scrollbar relative z-10" onClick={() => setIsMenuOpen(false)}>
                <div className="flex justify-center my-2">
                  <span className="bg-black/30 backdrop-blur-sm border border-white/10 text-white/60 text-[10px] px-3 py-1 rounded-full shadow-lg">
                    {formatDate()}
                  </span>
                </div>

                {messages.map((msg) => (
                  <div 
                    key={msg.id} 
                    className={`flex w-full ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}
                  >
                    {msg.sender === 'idol' && (
                      <div className="flex max-w-[85%] items-start space-x-2 animate-slide-in-left">
                        <div className="relative group cursor-pointer" onClick={() => profileInputRef.current.click()} title="í´ë¦­í•´ì„œ í”„ë¡œí•„ ë³€ê²½">
                          {/* í”„ë¡œí•„ ì´ë¯¸ì§€ */}
                          <img 
                            src={profileImg}
                            alt="profile" 
                            className="w-9 h-9 rounded-full border border-white/20 object-cover shadow-[0_0_15px_rgba(192,132,252,0.4)] group-hover:border-pink-500 transition-colors"
                          />
                          <div className="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-black rounded-full flex items-center justify-center">
                              <div className="w-2 h-2 bg-purple-500 rounded-full"></div>
                          </div>
                        </div>
                        <div className="flex flex-col space-y-1">
                          <span className="text-[10px] text-pink-200/70 ml-1">{IDOL_NAME}</span>
                          <div className="flex items-end space-x-1">
                            <div className="glass-bubble-idol px-3.5 py-2 rounded-2xl rounded-tl-none text-white/90 text-sm leading-relaxed shadow-lg break-words whitespace-pre-wrap">
                              {msg.text}
                            </div>
                            <span className="text-[9px] text-white/30 min-w-[35px] mb-1">
                              {msg.time}
                            </span>
                          </div>
                        </div>
                      </div>
                    )}

                    {msg.sender === 'user' && (
                      <div className="flex max-w-[85%] items-end justify-end space-x-1 animate-slide-in-right">
                        <div className="flex flex-col items-end">
                          {!msg.read && <span className="text-[9px] text-yellow-400 font-bold mb-0.5 drop-shadow-[0_0_5px_rgba(250,204,21,0.5)]">1</span>}
                          <span className="text-[9px] text-white/30 mb-1">{msg.time}</span>
                        </div>
                        <div className="bg-gradient-to-br from-pink-600 to-purple-700 border border-white/10 px-3.5 py-2 rounded-2xl rounded-tr-none text-white text-sm leading-relaxed shadow-[0_4px_15px_rgba(236,72,153,0.3)] font-medium break-words">
                          {msg.text}
                        </div>
                      </div>
                    )}
                  </div>
                ))}

                {isTyping && (
                  <div className="flex justify-start w-full animate-pulse">
                    <div className="flex items-start space-x-2">
                        <img 
                          src={profileImg}
                          alt="profile" 
                          className="w-9 h-9 rounded-full border border-white/20 object-cover opacity-80"
                        />
                        <div className="glass-bubble-idol px-4 py-3 rounded-2xl rounded-tl-none flex space-x-1.5 items-center h-9">
                          <div className="w-1.5 h-1.5 bg-pink-300 rounded-full animate-bounce" style={{ animationDelay: '0ms' }}></div>
                          <div className="w-1.5 h-1.5 bg-purple-300 rounded-full animate-bounce" style={{ animationDelay: '150ms' }}></div>
                          <div className="w-1.5 h-1.5 bg-indigo-300 rounded-full animate-bounce" style={{ animationDelay: '300ms' }}></div>
                        </div>
                    </div>
                  </div>
                )}
                
                <div ref={messagesEndRef} />
              </div>

              {/* 3. ì…ë ¥ì°½ ì˜ì—­ */}
              <div className="bg-[#1a1a2e]/80 backdrop-blur-xl p-3 pb-5 sticky bottom-0 w-full border-t border-white/5 z-20">
                <form onSubmit={handleSendMessage} className="flex items-center space-x-2 bg-black/40 px-1.5 py-1.5 rounded-full border border-white/10 focus-within:border-pink-500/50 focus-within:shadow-[0_0_20px_rgba(236,72,153,0.2)] transition-all duration-300">
                  <button type="button" onClick={() => bgInputRef.current.click()} className="p-2 rounded-full hover:bg-white/5 text-white/50 hover:text-pink-400 transition-colors" title="ë°°ê²½ ë³€ê²½">
                    <ImageIcon className="w-5 h-5" />
                  </button>
                  <input
                    type="text"
                    value={inputText}
                    onChange={(e) => setInputText(e.target.value)}
                    placeholder="ë£¨ë‚˜ì—ê²Œ ë‹µì¥í•˜ê¸°..."
                    className="flex-1 bg-transparent border-none outline-none text-sm text-white placeholder-white/30 min-w-0"
                  />
                  <button 
                    type="submit" 
                    disabled={!inputText.trim() || isTyping}
                    className={`p-2 rounded-full transition-all duration-300 flex items-center justify-center ${inputText.trim() && !isTyping ? 'bg-gradient-to-r from-pink-500 to-purple-600 text-white shadow-[0_0_10px_rgba(236,72,153,0.5)] transform hover:scale-105' : 'bg-white/10 text-white/20'}`}
                  >
                    <Send className="w-4 h-4 relative left-[1px]" />
                  </button>
                </form>
              </div>

            </div>
          );
        }
        
        // React ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
    <script>
        // API í‚¤ê°€ ë¹„ì–´ìˆì„ ë•Œ ì•Œë¦¼
        if ("YOUR_GEMINI_API_KEY_HERE" === "") {
            // ì´ ê²½ê³ ëŠ” API í‚¤ë¥¼ ë„£ì€ í›„ì—ëŠ” ë¬´ì‹œë©ë‹ˆë‹¤.
            console.warn("ê²½ê³ : API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•„ AI ëŒ€í™”ê°€ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì½”ë“œì˜ apiKey ë³€ìˆ˜ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.");
        }
    </script>
</body>
</html>